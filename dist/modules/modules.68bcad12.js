"use strict";angular.module("rideSharing",["ngAnimate","ngMaterial","ngRoute","ngSanitize","ngMessages","toastr","ui.router","config"]),function(){angular.module("config",[]).config(["toastrConfig",function(a){angular.extend(a,{containerId:"toast-container",extendedTimeOut:0,timeOut:5e3,newestOnTop:!0,preventOpenDuplicates:!0})}])}(),angular.module("rideSharing").config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("auth",{url:"/auth",templateUrl:"modules/auth/main.html"}).state("auth.sign-up",{url:"/sign-up",templateUrl:"modules/auth/sign-up.html",controller:"SignUp as SignUp"}).state("auth.log-in",{url:"/log-in",templateUrl:"modules/auth/log-in.html",controller:"LogIn as LogIn"}).state("ride-share",{url:"/ride-share",controller:"RideShare as RideShare",templateUrl:"modules/ride-share/main.html"}).state("ride-share.commuters",{url:"/commuters",controller:"Commuters as Commuters",templateUrl:"modules/ride-share/commuters.html"}).state("ride-share.owners",{url:"/owners",controller:"Owners as Owners",templateUrl:"modules/ride-share/owners.html"}),b.otherwise("/auth/sign-up")}]),angular.module("rideSharing").controller("SignUp",["$scope","$http","$state","$window","Utils",function(a,b,c,d,e){var f=this;f.newUser={type:"owner"},d.localStorage.getItem("users")?f.users=JSON.parse(d.localStorage.getItem("users")):(b({method:"GET",url:"json/users.4fb3442a.json"}).then(function(a){f.owners=a.data}),b({method:"GET",url:"json/commuters.cf6e9126.json"}).then(function(a){f.commuters=a.data})),f.createNewUser=function(){if(""===f.newUser.name||""===f.newUser.password)return void e.infoToastr("You need to enter both username and passowrd");var a,b=0;a="owner"===f.newUser.type?f.owners:f.commuters,angular.forEach(a,function(a){(a.email===f.newUser.email||a.phone===f.newUser.phone)&&(b=1,e.infoToastr("Please log in to continue","You are already an existing user!"))}),0===b&&(f.newUser.id=a.length+1,a.push(f.newUser),d.localStorage.setItem("users",JSON.stringify(a)),e.successToastr("Please log in to continue","Hola, you are successfully signed up!")),c.go("auth.log-in")}}]),angular.module("rideSharing").controller("LogIn",["$scope","$http","$state","$window","Utils",function(a,b,c,d,e){var f=this;f.user={},d.localStorage.getItem("users")?f.users=JSON.parse(d.localStorage.getItem("users")):b({method:"GET",url:"json/users.4fb3442a.json"}).then(function(a){f.users=a.data}),f.verifyUser=function(){var a,b=0;angular.forEach(f.users,function(g){g.email!==f.user.name&&g.phone!==f.user.name||g.password!==f.user.password||(b=1,a=g,d.localStorage.setItem("isLoggedIn",!0),d.localStorage.setItem("currentUser",JSON.stringify(a)),a.isOwner?c.go("ride-share.owners"):c.go("ride-share.commuters"),e.successToastr("You are successfully logged in!"))}),0===b&&e.errorToastr("Your login credentials are not correct. Please retry.")}}]),angular.module("rideSharing").controller("RideShare",["$state","$window",function(a,b){var c=this;return b.localStorage.getItem("isLoggedIn")?void(c.logOut=function(){b.localStorage.removeItem("isLoggedIn"),a.go("auth.log-in")}):void a.go("auth.log-in")}]),angular.module("rideSharing").controller("Commuters",["$scope","$filter","$state","$http","$window",function(a,b,c,d,e){var f,g,h,i=this;return g=JSON.parse(e.localStorage.getItem("currentUser")),g.isOwner?void c.go("ride-share.owners"):(i.route={},i.availableRiders=[],i.isRiderSelected=!1,i.isRiderConfirmed=!1,e.localStorage.getItem("routes")?f=JSON.parse(e.localStorage.getItem("routes")):d({method:"GET",url:"json/routes.e9223308.json"}).then(function(a){f=a.data,e.localStorage.setItem("routes",JSON.stringify(f))}),h=e.localStorage.getItem("commuters")?JSON.parse(e.localStorage.getItem("commuters")):[],i.searchLocation=function(){i.availableRiders=[],angular.forEach(f,function(a){a.route.source===i.route.source&&a.route.destination===i.route.destination&&a.seats>0&&i.availableRiders.push(a)})},i.selectRider=function(a){angular.forEach(i.availableRiders,function(a){a.isSelected=!1}),a.isSelected=!0,i.isRiderSelected=!0,i.selectedRider=a},i.confirmRide=function(){var a=0;i.isRiderConfirmed=!0,angular.forEach(f,function(a){a.phone===i.selectedRider.phone&&(a.seats=i.selectedRider.seats-1)}),e.localStorage.setItem("routes",JSON.stringify(f)),angular.forEach(h,function(b){b.phone===i.selectedRider.phone&&(a=1,b.commuters.push({name:g.name,phone:g.phone}))}),0===a&&h.push({name:i.selectedRider.name,phone:i.selectedRider.phone,commuters:[{name:g.name,phone:g.phone}]}),e.localStorage.setItem("commuters",JSON.stringify(h))},void(i.cancelRide=function(){angular.forEach(f,function(a){a.phone===i.selectedRider.phone&&(a.seats+=1)}),e.localStorage.setItem("routes",JSON.stringify(f)),i.isRiderConfirmed=!1,i.isRiderSelected=!1,i.selectedRider={},angular.forEach(i.availableRiders,function(a){a.isSelected=!1})}))}]),angular.module("rideSharing").controller("Owners",["$scope","$filter","$state","$http","$window",function(a,b,c,d,e){function f(a){angular.forEach(a,function(a){a.phone===i.phone&&(j.route={source:a.route.source,destination:a.route.destination,seats:a.seats,isSet:!0})})}var g,h,i,j=this;return i=JSON.parse(e.localStorage.getItem("currentUser")),i.isOwner?(j.route={},j.availableOwners=[],j.isRiding=!1,j.isOnRidingScreen=!1,h=e.localStorage.getItem("commuters")?JSON.parse(e.localStorage.getItem("commuters")):[],e.localStorage.getItem("routes")?(g=JSON.parse(e.localStorage.getItem("routes")),f(g)):d({method:"GET",url:"json/routes.e9223308.json"}).then(function(a){g=a.data,f(g),e.localStorage.setItem("routes",JSON.stringify(g))}),j.saveRoute=function(){var a=0;j.route.isSet=!0,angular.forEach(g,function(b){b.phone===i.phone&&(a=1,b.route.source=j.route.source,b.route.destination=j.route.destination,b.seats=j.route.seats)}),0===a&&g.push({name:i.name,phone:i.phone,ratings:null,route:{source:j.route.source,destination:j.route.destination},seats:j.route.seats}),e.localStorage.setItem("routes",JSON.stringify(g))},void(j.startRide=function(){j.isRiding=!0,j.isOnRidingScreen=!0,j.commuters=[],angular.forEach(h,function(a){a.phone===i.phone&&(j.commuters=a.commuters)})})):void c.go("ride-share.commuters")}]),angular.module("rideSharing").factory("Utils",["toastr",function(a){return{successToastr:function(b,c){c=c||"Success",a.success(b,c,{toastClass:"success-toastr",titleClass:"success-toastr-title",messageClass:"success-toastr-message",tapToDismiss:!1,closeButton:!0})},infoToastr:function(b,c){c=c||"Info",a.info(b,c,{toastClass:"info-toastr",titleClass:"info-toastr-title",messageClass:"info-toastr-message",tapToDismiss:!1,closeButton:!0})},errorToastr:function(b,c){c=c||"Error",a.error(b,c,{toastClass:"error-toastr",titleClass:"error-toastr-title",messageClass:"error-toastr-message",tapToDismiss:!1})}}}]),angular.module("rideSharing").run(["$templateCache",function(a){a.put("modules/auth/log-in.html",'<div class="log-in"> <div class="log-in__heading">Sign In into Your Account</div> <form ng-submit="LogIn.verifyUser()"> <md-input-container> <label>Username</label> <input type="text" name="username" ng-model="LogIn.user.name" placeholder="enter your 10-digit mobile number or email ID" required> </md-input-container> <md-input-container> <label>Password</label> <input type="password" name="password" ng-model="LogIn.user.password" minlength="6" placeholder="enter your password" required> </md-input-container> <div class="position"> <button class="button button--primary" type="submit">Log In</button> </div> </form> <div class="log-in__sign-up"> Don\'t have an account? <a ui-sref="auth.sign-up">Register</a> </div> </div>'),a.put("modules/auth/main.html",'<div class="main-container"> <h1 class="main-container__heading">Welcome to Ride Sharing App</h1> <div ui-view></div> </div>'),a.put("modules/auth/sign-up.html",'<div class="sign-up"> <div class="text-left register"> <div class="inline register-user" ng-class="{\'register-user--active\': SignUp.newUser.type == \'owner\'}" ng-click="SignUp.newUser.type = \'owner\'">Car Owner</div> <div class="inline register-user register-user--left" ng-class="{\'register-user--active\': SignUp.newUser.type == \'commuter\'}" ng-click="SignUp.newUser.type = \'commuter\'">Commuter</div> </div> <form ng-submit="SignUp.createNewUser()"> <md-input-container> <label>Full Name</label> <input type="text" name="username" ng-model="SignUp.newUser.name" placeholder="enter your firstname and lastname" required> </md-input-container> <md-input-container> <label>Email ID</label> <input type="email" name="email" ng-model="SignUp.newUser.email" placeholder="emter your email ID" required> </md-input-container> <md-input-container> <label>Mobile Number</label> <input type="number" name="phone" ng-model="SignUp.newUser.phone" placeholder="enter your 10-digit mobile number" minlength="10" maxlength="10" required> </md-input-container> <md-input-container> <label>Password <span>(min 6 characters)</span></label> <input type="password" name="password" ng-model="SignUp.newUser.password" minlength="6" placeholder="set your password" required> </md-input-container> <md-input-container> <label>Re-enter Password</label> <input type="password" name="repassword" ng-model="SignUp.newUser.repassword" minlength="6" placeholder="re-enter your password" required> </md-input-container> <md-input-container ng-if="SignUp.newUser.type == \'owner\'"> <label>Car Model</label> <input type="text" name="model" ng-model="SignUp.newUser.model" placeholder="name of the car you have" required> </md-input-container> <div class="position"> <button class="button button--primary" type="submit">Sign Up</button> </div> </form> <div class="sign-up__log-in"> Already have an account? <a ui-sref="auth.log-in">Log In</a> </div> </div>'),a.put("modules/ride-share/commuters.html",'<div class="pick-ride-container text-center"> <div ng-if="!Commuters.isRiderConfirmed"> <div class="pick-ride"> pick a ride <span class="log-out pull-right" ng-click="RideShare.logOut()">Logout</span> </div> <form class="pick-ride-form" ng-submit="Commuters.searchLocation()"> <md-input-container class="pick-ride-form__input pull-left"> <label>Start From</label> <input type="text" name="source" ng-model="Commuters.route.source" placeholder="enter start location" required> </md-input-container> <md-input-container class="pick-ride-form__input pull-right"> <label>Destination</label> <input type="text" name="destination" ng-model="Commuters.route.destination" placeholder="enter destination" required> </md-input-container> <div class="position"> <button class="button button--primary" type="submit">Search</button> </div> </form> <div class="available-riders-container" ng-if="Commuters.availableRiders.length > 0"> <div class="available-riders" ng-class="{\'available-riders--selected\': rider.isSelected}" ng-repeat="rider in Commuters.availableRiders" ng-click="Commuters.selectRider(rider)"> <div> <span class="available-riders__name">{{rider.name}}</span> <span class="available-riders__ratings">{{rider.ratings}}</span> </div> <div> route: <span class="available-riders__route">{{rider.route.source}} to {{rider.route.destination}}</span> </div> <div> model: <span class="available-riders__model">{{rider.model}}</span> </div> <div> seats available: <span class="available-riders__seats">{{rider.seats}}</span> </div> </div> </div> <div class="confirm-rider" ng-if="Commuters.isRiderSelected"> <button class="button button--primary" ng-click="Commuters.confirmRide()">Confirm Ride</button> </div> </div> <div ng-if="Commuters.isRiderConfirmed"> <div class="ride-details"> Ride Details <span class="log-out pull-right" ng-click="RideShare.logOut()">Logout</span> <span class="cancel-ride" ng-click="Commuters.cancelRide()">Cancel Ride</span> </div> <div class="selected-rider"> <div>Travelling from <span class="selected-rider__route">{{Commuters.selectedRider.route.source}}</span> to <span class="selected-rider__route">{{Commuters.selectedRider.route.destination}}</span> </div> <div> <span class="selected-rider__name">{{Commuters.selectedRider.name}}</span> <span class="selected-rider__ratings">{{Commuters.selectedRider.ratings}}</span> </div> <div> <span class="selected-rider__contact">{{Commuters.selectedRider.phone}}</span> <span class="selected-rider__model">{{Commuters.selectedRider.model}}</span> </div> </div> </div> </div>'),a.put("modules/ride-share/main.html","<div ui-view></div>"),a.put("modules/ride-share/owners.html",'<div class="share-ride-container text-center"> <div ng-if="!Owners.isRiding || !Owners.isOnRidingScreen"> <div class="share-ride"> share a ride <span class="log-out pull-right" ng-click="RideShare.logOut()">Logout</span> </div> <form class="share-ride-form" ng-submit="Owners.saveRoute()"> <md-input-container class="share-ride-form__input pull-left"> <label>Start From</label> <input type="text" name="source" ng-model="Owners.route.source" placeholder="enter start location" ng-readonly="Owners.route.isSet" required> </md-input-container> <md-input-container class="share-ride-form__input pull-right"> <label>Destination</label> <input type="text" name="destination" ng-model="Owners.route.destination" placeholder="enter destination" ng-readonly="Owners.route.isSet" required> </md-input-container> <md-input-container class="share-ride-form__input text-center"> <input type="text" name="seats" ng-model="Owners.route.seats" placeholder="enter seats available" ng-readonly="Owners.route.isSet" required> </md-input-container> <div class="position"> <button class="button button--secondary" ng-if="!Owners.route.isSet" type="submit">Save Route</button> <button class="button button--secondary" ng-if="Owners.route.isSet" ng-click="Owners.route.isSet = !Owners.route.isSet">Change Route</button> <button class="button button--primary" ng-if="!Owners.isRiding" ng-click="Owners.startRide()">Start Driving</button> <button class="button button--primary" ng-if="Owners.isRiding" ng-click="Owners.isOnRidingScreen = !Owners.isOnRidingScreen">Go to Commuter Details</button> </div> </form> </div> <div ng-if="Owners.isRiding && Owners.isOnRidingScreen"> <div class="ride-details"> Commuters Details <span class="log-out pull-right" ng-click="RideShare.logOut()">Logout</span> <span class="go-back pull-right" ng-click="Owners.isOnRidingScreen = !Owners.isOnRidingScreen">Go Back</span> </div> <div class="commuters"> <div>Travelling from <span class="commuters__route">{{Owners.route.source}}</span> to <span class="commuters__route">{{Owners.route.destination}}</span> </div> <div class="commuters-details" ng-repeat="commuter in Owners.commuters"> <div>Passenger {{$index + 1}}</div> <div> <span class="commuters-details__name">{{commuter.name}}</span> <span class="commuters-details__phone pull-right">{{commuter.phone}}</span> </div> </div> </div> </div> </div>')}]);
//# sourceMappingURL=modules.68bcad12.js.map